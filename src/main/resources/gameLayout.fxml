<?import com.comp2042.view.panel.GameOverPanel?>
<?import com.comp2042.view.panel.ResumePanel?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>

<BorderPane fx:controller="com.comp2042.controller.GuiController"
            xmlns:fx="http://javafx.com/fxml"
            prefWidth="500" prefHeight="550">
    
    <!-- Left/Center: Game area with absolute positioning (required for brick positioning) -->
    <center>
        <Pane prefWidth="260">
            <BorderPane.margin>
                <Insets left="20" top="20" bottom="20"/>
            </BorderPane.margin>
            
            <!-- Brick panel - Keep ontop! -->
            <GridPane fx:id="brickPanel" vgap="1" hgap="1"/>
            
            <!-- Game board background -->
            <BorderPane styleClass="gameBoard" fx:id="gameBoard">
                <center>
                    <GridPane fx:id="gamePanel" hgap="1" vgap="1" layoutY="30" layoutX="40"/>
                </center>
            </BorderPane>
            
            <!-- Notification overlay -->
            <Group fx:id="groupNotification" layoutX="14" layoutY="203">
                <VBox alignment="CENTER">
                    <GameOverPanel fx:id="gameOverPanel"/>
                    <ResumePanel fx:id="resumePanel"/>
                </VBox>
            </Group>
        </Pane>
    </center>
    
    <!-- Right: Controls and info panel (responsive) -->
    <right>
        <VBox spacing="15" alignment="TOP_CENTER" prefWidth="180">
            <BorderPane.margin>
                <Insets right="20" top="20" bottom="20" left="15"/>
            </BorderPane.margin>
            
            <!-- Control buttons -->
            <VBox spacing="10" alignment="CENTER">
                <Button text="Pause" onAction="#pauseGame" prefWidth="100"/>
                <Button text="New Game" onAction="#newGame" prefWidth="100"/>
                <Button text="Menu" onAction="#backToMenu" prefWidth="100"/>
            </VBox>
            
            <!-- Spacer -->
            <Region VBox.vgrow="SOMETIMES" prefHeight="20"/>
            
            <!-- Score display -->
            <VBox spacing="5" alignment="CENTER">
                <Label text="SCORE" styleClass="scoreLabel"/>
                <Label fx:id="scoreLabel" text="0" styleClass="scoreValue"/>
            </VBox>
            
            <!-- Spacer -->
            <Region VBox.vgrow="SOMETIMES" prefHeight="20"/>
            
            <!-- Next brick display -->
            <VBox spacing="3" alignment="CENTER">
                <Label text="NEXT" styleClass="scoreLabel"/>
                <StackPane maxWidth="90" maxHeight="90" 
                           style="-fx-background-color: #312c2cff; -fx-padding: 5;">
                    <GridPane fx:id="nextBrickPanel" vgap="1" hgap="1" 
                              alignment="CENTER"/>
                </StackPane>
            </VBox>
            
            <!-- Bottom spacer -->
            <Region VBox.vgrow="ALWAYS"/>
        </VBox>
    </right>
    
    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</BorderPane>